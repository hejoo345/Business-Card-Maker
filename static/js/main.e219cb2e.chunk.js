(this.webpackJsonptemplate=this.webpackJsonptemplate||[]).push([[0],{10:function(e,a,t){e.exports={fontSize:"1.25rem",cardMakerAdd:"cardMakerAdd_cardMakerAdd__IjCEB",line1:"cardMakerAdd_line1__1Brqp",name:"cardMakerAdd_name__OW_A8",company:"cardMakerAdd_company__2Wqt3",theme:"cardMakerAdd_theme__2ewdp",line2:"cardMakerAdd_line2__1E3kD",title:"cardMakerAdd_title__2SqdI",email:"cardMakerAdd_email__1VUW8",line3:"cardMakerAdd_line3__2r53O",message:"cardMakerAdd_message__3FLlv",line4:"cardMakerAdd_line4__1aVTA",fileBtn:"cardMakerAdd_fileBtn__2B7ll",addBtn:"cardMakerAdd_addBtn__3DyUY"}},11:function(e,a,t){e.exports={cardPreviewItem:"cardPreviewItem_cardPreviewItem__wxWyG",light:"cardPreviewItem_light__28tuY",dark:"cardPreviewItem_dark__2vlj1",beige:"cardPreviewItem_beige__v5RpZ",img:"cardPreviewItem_img__3krWH",info:"cardPreviewItem_info__JJcKT",name:"cardPreviewItem_name__2QcxN",company:"cardPreviewItem_company__b-Tfz",title:"cardPreviewItem_title__12j4G",message:"cardPreviewItem_message__Dg13j",email:"cardPreviewItem_email__5i9M1"}},19:function(e,a,t){e.exports={login:"login_login__19aQM",loginBox:"login_loginBox__3NKqg",Login:"login_Login__2myMI",googleBtn:"login_googleBtn__33d9h",githubBtn:"login_githubBtn__2tb12"}},21:function(e,a,t){e.exports={container:"imgInputButton_container__2PndZ",button:"imgInputButton_button__3zNCt",fileBtn:"imgInputButton_fileBtn__FLIZT",loading:"imgInputButton_loading__2fPsR",spin:"imgInputButton_spin__2ZvFH"}},24:function(e,a,t){e.exports={container:"cardMakerList_container__T244X",cards:"cardMakerList_cards__1yJ6V",cardMakerTitle:"cardMakerList_cardMakerTitle__3E69z"}},25:function(e,a,t){e.exports={container:"cardPreviewList_container__2C5Q3",cards:"cardPreviewList_cards__3O_bZ",cardPreviewTitle:"cardPreviewList_cardPreviewTitle__2rpie"}},30:function(e,a,t){e.exports={header:"header_header__v9FKw",logoutBtn:"header_logoutBtn__tmyLf"}},33:function(e,a,t){e.exports={mediaQuery:"62rem",main:"main_main__2W-l3",container:"main_container__2FB0S"}},37:function(e,a,t){e.exports={app:"app_app__cewju"}},39:function(e,a,t){e.exports={footer:"footer_footer__1lZIc"}},45:function(e,a,t){e.exports={makerWhite:"white"}},57:function(e,a,t){"use strict";t.r(a);var n=t(7),c=t(1),r=t(2),i=t.n(r),s=t(36),l=t.n(s),o=(t(45),t(37)),d=t.n(o),u=t(19),m=t.n(u),j=t(5),_=t(30),f=t.n(_),p=Object(r.memo)((function(e){var a=e.onLogout;return Object(c.jsxs)("header",{className:f.a.header,children:[Object(c.jsx)("h2",{children:"Business Card Maker"}),a&&Object(c.jsx)("button",{className:f.a.logoutBtn,onClick:a,children:"Logout"})]})})),b=function(e){var a=e.authService,t=Object(j.f)();Object(r.useEffect)((function(){a.onAuthChange((function(e){e&&n(e.uid)}))}));var n=function(e){t.push({pathname:"/main",state:{id:e}})},i=function(e){a.login(e.currentTarget.textContent).then((function(e){n(e.user.uid)}))};return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("section",{className:m.a.login,children:[Object(c.jsx)(p,{}),Object(c.jsxs)("section",{className:m.a.loginBox,children:[Object(c.jsx)("h3",{className:m.a.Login,children:"Login"}),Object(c.jsx)("button",{className:m.a.googleBtn,onClick:i,children:"Google"}),Object(c.jsx)("button",{className:m.a.githubBtn,onClick:i,children:"Github"})]})]})})},h=t(22),O=t(14),g=t(23),x=t(9),v=t.n(x),k=Object(r.memo)((function(e){var a=e.FileInput,t=e.card,r=e.onCardDelete,i=e.onCardUpdate,s=function(e){null!=e.currentTarget&&(e.preventDefault(),i(Object(n.a)(Object(n.a)({},t),{},Object(g.a)({},e.currentTarget.name,e.currentTarget.value))))},l=t.fileName||"No File";return Object(c.jsxs)("form",{className:v.a.cardMakerItem,children:[Object(c.jsxs)("div",{className:v.a.line1,children:[Object(c.jsx)("input",{className:v.a.name,type:"text",id:t.id,name:"name",defaultValue:t.name,onChange:s}),Object(c.jsx)("input",{className:v.a.company,type:"text",id:t.id,name:"company",defaultValue:t.company,onChange:s}),Object(c.jsxs)("select",{className:v.a.theme,name:"theme",id:t.id,defaultValue:t.theme,onChange:s,children:[Object(c.jsx)("option",{value:"Light",children:"Light"}),Object(c.jsx)("option",{value:"Dark",children:"Dark"}),Object(c.jsx)("option",{value:"Beige",children:"Beige"})]})]}),Object(c.jsxs)("div",{className:v.a.line2,children:[Object(c.jsx)("input",{className:v.a.title,type:"text",id:t.id,name:"title",defaultValue:t.title,onChange:s}),Object(c.jsx)("input",{className:v.a.email,type:"text",id:t.id,name:"email",defaultValue:t.email,onChange:s})]}),Object(c.jsx)("textarea",{className:v.a.message,type:"text",id:t.id,name:"message",defaultValue:t.message,onChange:s}),Object(c.jsxs)("div",{className:v.a.line4,children:[Object(c.jsx)(a,{fileName:l,cardId:t.id,onFileChange:function(e){i(Object(n.a)(Object(n.a)({},t),{},{fileName:e.name,fileURL:e.url}))}}),Object(c.jsx)("button",{className:v.a.deleteBtn,onClick:function(e){e.preventDefault(),r(t)},children:"Delete"})]})]})})),N=t(10),I=t.n(N),y=Object(r.memo)((function(e){var a=e.FileInput,t=e.onCardAdd,n=i.a.createRef(),s=i.a.createRef(),l=i.a.createRef(),o=i.a.createRef(),d=i.a.createRef(),u=i.a.createRef(),m=i.a.createRef(),j=Object(r.useState)({fileName:null,fileURL:null}),_=Object(O.a)(j,2),f=_[0],p=_[1];return Object(c.jsxs)("form",{ref:n,className:I.a.cardMakerAdd,onSubmit:function(e){e.preventDefault();var a={id:Date.now(),name:s.current.value||"",company:l.current.value||"",theme:o.current.value||"",title:d.current.value||"",email:u.current.value||"",message:m.current.value||"",fileName:f.fileName||"",fileURL:f.fileURL||""};n.current.reset(),p({fileName:null,fileURL:null}),t(a)},children:[Object(c.jsxs)("div",{className:I.a.line1,children:[Object(c.jsx)("input",{ref:s,className:I.a.name,type:"text",name:"name",placeholder:"name"}),Object(c.jsx)("input",{ref:l,className:I.a.company,type:"text",name:"company",placeholder:"company"}),Object(c.jsxs)("select",{ref:o,className:I.a.theme,name:"theme",children:[Object(c.jsx)("option",{value:"Light",children:"Light"}),Object(c.jsx)("option",{value:"Dark",children:"Dark"}),Object(c.jsx)("option",{value:"Beige",children:"Beige"})]})]}),Object(c.jsxs)("div",{className:I.a.line2,children:[Object(c.jsx)("input",{ref:d,className:I.a.title,type:"text",name:"title",placeholder:"title"}),Object(c.jsx)("input",{ref:u,className:I.a.email,type:"text",name:"email",placeholder:"email"})]}),Object(c.jsx)("textarea",{ref:m,className:I.a.message,type:"text",name:"message",placeholder:"message"}),Object(c.jsxs)("div",{className:I.a.line4,children:[Object(c.jsx)(a,{fileName:f.fileName,onFileChange:function(e){p({fileName:e.name,fileURL:e.url})}}),Object(c.jsx)("button",{className:I.a.addBtn,children:"Add"})]})]})})),C=t(24),w=t.n(C),M=function(e){var a=e.FileInput,t=e.cards,n=e.onCardDelete,r=e.onCardUpdate,i=(e.onFileChange,e.onCardAdd);return Object(c.jsxs)("section",{className:w.a.container,children:[Object(c.jsx)("h1",{className:w.a.cardMakerTitle,children:"Card Maker"}),Object(c.jsx)("ul",{className:w.a.cards,children:Object.keys(t).map((function(e){return Object(c.jsx)(k,{FileInput:a,card:t[e],onCardDelete:n,onCardUpdate:r},e)}))}),Object(c.jsx)(y,{FileInput:a,onCardAdd:i})]})},B=t(11),A=t.n(B),L=function(e){switch(e){case"Light":return A.a.light;case"Dark":return A.a.dark;case"Beige":return A.a.beige}},P=Object(r.memo)((function(e){var a=e.card,t=a.fileURL||"/images/default_logo.png";return Object(c.jsxs)("li",{className:"".concat(A.a.cardPreviewItem," ").concat(L(a.theme)),children:[Object(c.jsx)("img",{className:A.a.img,src:t,alt:t}),Object(c.jsxs)("ul",{className:A.a.info,children:[Object(c.jsx)("h3",{className:A.a.name,children:a.name}),Object(c.jsx)("li",{className:A.a.company,children:a.company}),Object(c.jsx)("li",{className:A.a.title,children:a.title}),Object(c.jsx)("li",{className:A.a.message,children:a.message}),Object(c.jsx)("li",{className:A.a.email,children:a.email})]})]})})),F=t(25),R=t.n(F),D=function(e){var a=e.cards;return Object(c.jsxs)("section",{className:R.a.container,children:[Object(c.jsx)("h1",{className:R.a.cardPreviewTitle,children:"Card Preview"}),Object(c.jsx)("ul",{className:R.a.cards,children:Object.keys(a).map((function(e){return Object(c.jsx)(P,{card:a[e]},e)}))})]})},S=(t(39),t(33)),T=t.n(S),U=function(e){var a=e.FileInput,t=e.authService,i=e.cardRepository,s=Object(j.f)().state,l=Object(r.useState)({}),o=Object(O.a)(l,2),d=o[0],u=o[1],m=Object(r.useState)(s&&s.id),_=Object(O.a)(m,2),f=_[0],b=_[1],h=Object(j.f)(),g=Object(r.useCallback)((function(){t.logout()}),[t]);Object(r.useEffect)((function(){if(f){var e=i.syncCards(f,(function(e){u(e)}));return function(){return e()}}}),[f,i]),Object(r.useEffect)((function(){t.onAuthChange((function(e){e?b(e.uid):h.push("/")}))}),[t,f,h]);return Object(c.jsxs)("section",{className:T.a.main,children:[Object(c.jsx)(p,{onLogout:g}),Object(c.jsxs)("div",{className:T.a.container,children:[Object(c.jsx)(M,{FileInput:a,cards:d,onCardDelete:function(e){u((function(a){var t=Object(n.a)({},a);return delete t[e.id],t})),i.removeCard(f,e)},onCardUpdate:function(e){u((function(a){var t=Object(n.a)({},a);return t[e.id]=e,t})),i.saveCard(f,e)},onCardAdd:function(e){u((function(a){var t=Object(n.a)({},a);return t[e.id]=e,t})),i.saveCard(f,e)}}),Object(c.jsx)(D,{cards:d})]})]})};var J=function(e){var a=e.FileInput,t=e.authService,n=e.cardRepository;return Object(c.jsx)("div",{className:d.a.app,children:Object(c.jsx)(h.a,{children:Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:"/",exact:!0,children:Object(c.jsx)(b,{authService:t})}),Object(c.jsx)(j.a,{path:"/main",exact:!0,children:Object(c.jsx)(U,{FileInput:a,authService:t,cardRepository:n})})]})})})},E=t(16),V=t(17),W=t(26),G=(t(50),t(52),W.a.initializeApp({apiKey:"AIzaSyCS9JtGvJWpcIRPV1UlL1UTDceMTNBZokI",authDomain:"business-card-maker-f2bd1.firebaseapp.com",databaseURL:"https://business-card-maker-f2bd1-default-rtdb.firebaseio.com",projectId:"business-card-maker-f2bd1"})),Z=G.auth(),z=G.database(),K=new W.a.auth.GoogleAuthProvider,q=new W.a.auth.GithubAuthProvider,Q=function(){function e(){Object(E.a)(this,e)}return Object(V.a)(e,[{key:"login",value:function(e){var a=this.getProvider(e);return Z.signInWithPopup(a)}},{key:"logout",value:function(){Z.signOut()}},{key:"onAuthChange",value:function(e){Z.onAuthStateChanged((function(a){e(a)}))}},{key:"getProvider",value:function(e){switch(e){case"Google":return K;case"Github":return q;default:throw new Error("not supported provider: ".concat(e))}}}]),e}(),H=t(13),X=t.n(H),Y=t(18),$=function(){function e(){Object(E.a)(this,e)}return Object(V.a)(e,[{key:"upload",value:function(){var e=Object(Y.a)(X.a.mark((function e(a){var t,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("file",a),t.append("upload_preset","o10e0flw"),e.next=5,fetch("https://api.cloudinary.com/v1_1/dam1bvuv9/image/upload",{method:"POST",body:t});case 5:return n=e.sent,e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()}]),e}(),ee=t(21),ae=t.n(ee),te=Object(r.memo)((function(e){var a=e.fileName,t=e.cardId,n=e.imgUploader,i=e.onFileChange,s=Object(r.useState)(!1),l=Object(O.a)(s,2),o=l[0],d=l[1],u=Object(r.useRef)(),m=function(){var e=Object(Y.a)(X.a.mark((function e(a){var t;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,n.upload(a.target.files[0]);case 3:t=e.sent,d(!1),i({name:t.original_filename,url:t.url});case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:ae.a.container,children:[Object(c.jsx)("input",{ref:u,className:ae.a.fileBtn,type:"file",id:t,accept:"image/jpg, image/png, image/jpeg",onChange:m}),!o&&Object(c.jsx)("button",{className:ae.a.button,onClick:function(e){e.preventDefault(),u.current.click()},children:a||"No File"}),o&&Object(c.jsx)("div",{className:ae.a.loading})]})})),ne=function(){function e(){Object(E.a)(this,e)}return Object(V.a)(e,[{key:"syncCards",value:function(){var e=Object(Y.a)(X.a.mark((function e(a,t){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=z.ref("".concat(a,"/cards"))).on("value",(function(e){var a=e.val();a&&t(a)})),e.abrupt("return",(function(){return n.off()}));case 3:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()},{key:"saveCard",value:function(e,a){z.ref("".concat(e,"/cards/").concat(a.id)).set(a)}},{key:"removeCard",value:function(e,a){z.ref("".concat(e,"/cards/").concat(a.id)).remove()}}]),e}(),ce=new Q,re=new $,ie=new ne,se=Object(r.memo)((function(e){return Object(c.jsx)(te,Object(n.a)(Object(n.a)({},e),{},{imgUploader:re}))}));l.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(J,{authService:ce,FileInput:se,cardRepository:ie})}),document.getElementById("root"))},9:function(e,a,t){e.exports={cardMakerItem:"cardMakerItem_cardMakerItem__3jVHE",line1:"cardMakerItem_line1__KamJe",name:"cardMakerItem_name__3_LFJ",company:"cardMakerItem_company__13tJw",theme:"cardMakerItem_theme__2D2jF",line2:"cardMakerItem_line2__1rWdN",title:"cardMakerItem_title__16Zjs",email:"cardMakerItem_email__gBOJb",line3:"cardMakerItem_line3__2Fuc_",message:"cardMakerItem_message__1M7jM",line4:"cardMakerItem_line4__3FZE-",fileBtn:"cardMakerItem_fileBtn__anKXJ",deleteBtn:"cardMakerItem_deleteBtn__1AXEL"}}},[[57,1,2]]]);
//# sourceMappingURL=main.e219cb2e.chunk.js.map